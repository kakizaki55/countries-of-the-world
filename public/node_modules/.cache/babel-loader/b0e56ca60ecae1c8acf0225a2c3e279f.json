{"ast":null,"code":"import { PostgrestQueryBuilder } from '@supabase/postgrest-js';\nimport { SupabaseRealtimeClient } from './SupabaseRealtimeClient';\nexport class SupabaseQueryBuilder extends PostgrestQueryBuilder {\n  constructor(url, _ref) {\n    let {\n      headers = {},\n      schema,\n      realtime,\n      table,\n      fetch\n    } = _ref;\n    super(url, {\n      headers,\n      schema,\n      fetch\n    });\n    this._subscription = new SupabaseRealtimeClient(realtime, headers, schema, table);\n    this._realtime = realtime;\n  }\n  /**\n   * Subscribe to realtime changes in your databse.\n   * @param event The database event which you would like to receive updates for, or you can use the special wildcard `*` to listen to all changes.\n   * @param callback A callback that will handle the payload that is sent whenever your database changes.\n   */\n\n\n  on(event, callback) {\n    if (!this._realtime.isConnected()) {\n      this._realtime.connect();\n    }\n\n    return this._subscription.on(event, callback);\n  }\n\n}","map":{"version":3,"sources":["../../../src/lib/SupabaseQueryBuilder.ts"],"names":[],"mappings":"AAAA,SAAS,qBAAT,QAAsC,wBAAtC;AACA,SAAS,sBAAT,QAAuC,0BAAvC;AAIA,OAAM,MAAO,oBAAP,SAAuC,qBAAvC,CAA+D;AAInE,EAAA,WAAA,CACE,GADF,QAcG;AAAA,QAZD;AACE,MAAA,OAAO,GAAG,EADZ;AAEE,MAAA,MAFF;AAGE,MAAA,QAHF;AAIE,MAAA,KAJF;AAKE,MAAA;AALF,KAYC;AAED,UAAM,GAAN,EAAW;AAAE,MAAA,OAAF;AAAW,MAAA,MAAX;AAAmB,MAAA;AAAnB,KAAX;AAEA,SAAK,aAAL,GAAqB,IAAI,sBAAJ,CAA2B,QAA3B,EAAqC,OAArC,EAA8C,MAA9C,EAAsD,KAAtD,CAArB;AACA,SAAK,SAAL,GAAiB,QAAjB;AACD;AAED;;;;AAIG;;;AACH,EAAA,EAAE,CACA,KADA,EAEA,QAFA,EAEuD;AAEvD,QAAI,CAAC,KAAK,SAAL,CAAe,WAAf,EAAL,EAAmC;AACjC,WAAK,SAAL,CAAe,OAAf;AACD;;AACD,WAAO,KAAK,aAAL,CAAmB,EAAnB,CAAsB,KAAtB,EAA6B,QAA7B,CAAP;AACD;;AAvCkE","sourceRoot":"","sourcesContent":["import { PostgrestQueryBuilder } from '@supabase/postgrest-js';\nimport { SupabaseRealtimeClient } from './SupabaseRealtimeClient';\nexport class SupabaseQueryBuilder extends PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, realtime, table, fetch, }) {\n        super(url, { headers, schema, fetch });\n        this._subscription = new SupabaseRealtimeClient(realtime, headers, schema, table);\n        this._realtime = realtime;\n    }\n    /**\n     * Subscribe to realtime changes in your databse.\n     * @param event The database event which you would like to receive updates for, or you can use the special wildcard `*` to listen to all changes.\n     * @param callback A callback that will handle the payload that is sent whenever your database changes.\n     */\n    on(event, callback) {\n        if (!this._realtime.isConnected()) {\n            this._realtime.connect();\n        }\n        return this._subscription.on(event, callback);\n    }\n}\n//# sourceMappingURL=SupabaseQueryBuilder.js.map"]},"metadata":{},"sourceType":"module"}